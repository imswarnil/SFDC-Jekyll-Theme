---
layout: default
title: Search
excerpt: "Search for a page or post you're looking for"
subtitle: "Find articles, projects, and pages across the entire site."
---

<div class="search-page sf-container">

  <header class="search-header">
    <h1 class="sf-h1">{{ page.title }}</h1>
    <p class="sf-text--large sf-text--muted">{{ page.subtitle }}</p>
  </header>

  <form class="search-form" id="search-form" action="" onsubmit="return false;">
    <i class="ph-bold ph-magnifying-glass search-form__icon"></i>
    <input class="search-form__input" id="search-input" type="search" name="search" placeholder="e.g. Installation, project, ..." autocomplete="off" />
  </form>

  <div class="search-results" id="search-results-container">
    <!-- Search results will be dynamically injected here -->
  </div>

  <noscript>
    <div class="search-status">
      <i class="ph-bold ph-warning"></i>
      <p>Please enable JavaScript to use the search form.</p>
    </div>
  </noscript>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const endpoint = '{{ "/assets/search.json" | relative_url }}';
  const pages = [];

  // --- Elements ---
  const searchInput = document.getElementById('search-input');
  const resultsContainer = document.getElementById('search-results-container');

  // --- Fetch search data ---
  fetch(endpoint)
    .then(blob => blob.json())
    .then(data => pages.push(...data))
    .catch(err => console.error('Error fetching search data:', err));

  // --- Helper function to determine icon based on URL ---
  function getIconForType(url) {
    if (url.includes('/docs/')) return 'ph-book-open';
    if (url.includes('/blog/')) return 'ph-article';
    if (url.includes('/projects/')) return 'ph-rocket-launch';
    if (url.includes('/products/')) return 'ph-storefront';
    return 'ph-file-text'; // Default icon
  }
  
  // --- Search and filter logic ---
  function findResults(termToMatch, pages) {
    if (!termToMatch) return [];
    return pages.filter(item => {
      const regex = new RegExp(termToMatch, 'gi');
      return item.title.match(regex) || item.content.match(regex);
    });
  }

  // --- Render results to the DOM ---
  function displayResults() {
    const searchTerm = this.value;
    
    // If the search term is empty, clear the results and show the initial state.
    if (!searchTerm || searchTerm.length < 2) {
      resultsContainer.innerHTML = `
        <div class="search-status">
          <i class="ph-bold ph-keyboard"></i>
          <p>Start typing to see search results.</p>
        </div>`;
      return;
    }

    const resultsArray = findResults(searchTerm, pages);
    
    let html = '';

    if (resultsArray.length > 0) {
      // Build the header with result count
      html += `
        <div class="search-results__header">
          <h2 class="search-results__title">Results</h2>
          <span class="search-results__count">${resultsArray.length} found</span>
        </div>`;
      
      // Build the list of results
      html += '<ul class="search-results__list">';
      html += resultsArray.map(item => {
        const icon = getIconForType(item.url);
        return `
          <li>
            <a href="${item.url}" class="search-result-item">
              <article>
                <i class="ph-bold ${icon} search-result-item__icon"></i>
                <div class="search-result-item__content">
                  <h3 class="search-result-item__title">${item.title}</h3>
                  <p class="search-result-item__excerpt">${item.excerpt}</p>
                </div>
              </article>
            </a>
          </li>`;
      }).join('');
      html += '</ul>';

    } else {
      // Show a "no results" message
      html = `
        <div class="search-status">
          <i class="ph-bold ph-binoculars"></i>
          <h3>No results found</h3>
          <p>Try searching for a different term.</p>
        </div>`;
    }

    resultsContainer.innerHTML = html;
  }

  // --- Event Listeners ---
  searchInput.addEventListener('keyup', displayResults);
  
  // Display initial state on page load
  displayResults.call({ value: '' });
});
</script>