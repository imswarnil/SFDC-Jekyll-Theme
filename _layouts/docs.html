---
layout: default
---
<div class="docs-sidebar-backdrop" id="docs-sidebar-backdrop"></div>
<div class="sf-container">

  {% comment %} Logic to get category info from folder name {% endcomment %}
  {% assign path_parts = page.path | split: '/' %}
  {% assign category_slug = path_parts[1] %}
  {% assign category_page = site.docs | where_exp: "item", "item.path contains '_index.md'" | where: "category_slug", category_slug | first %}

  {% if page.url == '/docs/' %}
    <!-- ====================================================== -->
    <!-- DOCS HOMEPAGE VIEW (/docs/)                              -->
    <!-- ====================================================== -->
    <header class="docs-header docs-header--home">
      <h1 class="sf-h1">{{ page.title }}</h1>
      <p class="sf-text--large sf-text--muted">{{ page.description }}</p>
    </header>

    <div class="docs-search">
      <i class="ph-bold ph-magnifying-glass docs-search__icon"></i>
      <input type="search" id="docs-search-input" class="docs-search__input" placeholder="Search articles...">
    </div>

    <div class="docs-category-grid" id="docs-category-grid">
      {% assign categories = site.docs | where_exp: "item", "item.path contains '_index.md'" | sort: "order" %}
      {% for cat_page in categories %}
        {% assign docs_in_category = site.docs | where: "category_slug", cat_page.category_slug %}
        {% include docs_card.html
          card_url=cat_page.url
          card_icon=cat_page.category_icon
          card_title=cat_page.category_title
          card_description=cat_page.content | strip_html | truncatewords: 20
          card_footer_text=docs_in_category.size | append: " articles"
        %}
      {% endfor %}
    </div>

  {% elsif page.path contains '_index.md' %}
    <!-- ====================================================== -->
    <!-- DOCS CATEGORY LANDING PAGE (e.g., /docs/getting-started/) -->
    <!-- ====================================================== -->
    <header class="docs-header">
      <h1 class="sf-h1">{{ page.category_title }}</h1>
      <p class="sf-text--large sf-text--muted">{{ page.content | strip_html }}</p>
    </header>

    <div class="docs-category-grid">
      {% assign docs_in_this_category = site.docs | where: "category_slug", page.category_slug | where_exp: "item", "item.path != page.path" | sort: "order" %}
      {% for doc in docs_in_this_category %}
        {% include docs_card.html
          card_url=doc.url
          card_icon="file-text"
          card_title=doc.title
          card_description=doc.description | default: "Click to read this article."
        %}
      {% endfor %}
    </div>
    
  {% else %}
    <!-- ====================================================== -->
    <!-- DOCS ARTICLE VIEW (all other pages)                    -->
    <!-- ====================================================== -->
    <div class="docs-grid docs-grid--article">
      <!-- Left Column: Sidebar -->
      <aside class="docs-sidebar" id="docs-sidebar">
        <button class="docs-sidebar__close" id="docs-sidebar-close" aria-label="Close navigation"><i class="ph-bold ph-x"></i></button>
        <nav>
          {% assign categories = site.docs | where_exp: "item", "item.path contains '_index.md'" | sort: "order" %}
          {% for cat_page in categories %}
            <div class="docs-nav-category">
              <h2 class="docs-nav-category__title">
                <i class="ph-bold ph-{{ cat_page.category_icon | default: 'folder' }}"></i>
                <span>{{ cat_page.category_title }}</span>
              </h2>
              <ul class="docs-nav-list">
                {% assign docs_in_cat = site.docs | where: "category_slug", cat_page.category_slug | sort: "order" %}
                {% for doc in docs_in_cat %}
                  <li><a href="{{ doc.url | relative_url }}" class="docs-nav-link {% if page.url == doc.url %}is-active{% endif %}">{{ doc.title }}</a></li>
                {% endfor %}
              </ul>
            </div>
          {% endfor %}
        </nav>
      </aside>
      
      <!-- Center Column: Main Content -->
      <main class="docs-main">
        <header class="docs-header">
          <button class="docs-nav-trigger" id="docs-nav-trigger" aria-label="Open navigation"><i class="ph-bold ph-list"></i><span>Browse</span></button>
          
          <ul class="docs-breadcrumb">
            <li><a href="{{ '/docs/' | relative_url }}">Docs</a></li>
            <li><i class="ph-bold ph-caret-right"></i></li>
            <li>{{ category_page.category_title }}</li>
          </ul>

          <h1 class="sf-h1">{{ page.title }}</h1>
          {% if page.description %}<p class="sf-text--large sf-text--muted">{{ page.description }}</p>{% endif %}
        </header>

        {% assign content_parts = content | split: '</p>' %}
        <div class="docs-content">
          {{ content_parts | first | append: '</p>' }}
          
          <div class="docs-toc--inline">
            {% include toc.html html=content class='toc-list' h_min=2 h_max=3 contents_title='On This Page' %}
          </div>
          
          {{ content_parts | shift | join: '</p>' }}
        </div>
        
        <div class="docs-meta">
          <a href="{{ site.github_repo_url }}/edit/main/{{ page.path }}" target="_blank" rel="noopener noreferrer">
            <i class="ph-bold ph-github-logo"></i>
            <span>Edit this page on GitHub</span>
          </a>
          <a href="{{ site.github_repo_url }}/issues/new" target="_blank" rel="noopener noreferrer">
            <i class="ph-bold ph-bug"></i>
            <span>Report an issue</span>
          </a>
        </div>

        <nav class="docs-pagination">
          {% if page.previous.url %}<a href="{{ page.previous.url | relative_url }}" class="docs-pagination__link"><span class="docs-pagination__label">Previous</span><span class="docs-pagination__title">{{ page.previous.title }}</span></a>{% endif %}
          {% if page.next.url %}<a href="{{ page.next.url | relative_url }}" class="docs-pagination__link docs-pagination__link--next"><span class="docs-pagination__label">Next</span><span class="docs-pagination__title">{{ page.next.title }}</span></a>{% endif %}
        </nav>
      </main>

      <!-- Right Column: Desktop TOC & Ads -->
      <aside class="docs-aside">
        {% include toc.html html=content class='toc-list' h_min=2 h_max=3 contents_title='On This Page' %}
        <div class="docs-ad-placeholder">
          <i class="ph-bold ph-google-logo"></i>
          <span>AdSense Placeholder<br>300 x 250</span>
        </div>
        <a href="{{ site.sponsor_url }}" class="docs-ad-placeholder" style="margin-top: var(--sf-4);">
          <i class="ph-bold ph-hand-heart"></i>
          <span>Sponsor this Project</span>
        </a>
      </aside>
    </div>
  {% endif %}
</div>
<!-- All necessary JS in one place for simplicity -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- Mobile Sidebar Toggle ---
  const sidebar = document.getElementById('docs-sidebar');
  const trigger = document.getElementById('docs-nav-trigger');
  const closeBtn = document.getElementById('docs-sidebar-close');
  const backdrop = document.getElementById('docs-sidebar-backdrop');
  if (sidebar && trigger) {
    const openSidebar = () => { sidebar.classList.add('is-open'); backdrop.classList.add('is-visible'); document.body.style.overflow = 'hidden'; };
    const closeSidebar = () => { sidebar.classList.remove('is-open'); backdrop.classList.remove('is-visible'); document.body.style.overflow = ''; };
    trigger.addEventListener('click', openSidebar);
    closeBtn.addEventListener('click', closeSidebar);
    backdrop.addEventListener('click', closeSidebar);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && sidebar.classList.contains('is-open')) closeSidebar(); });
  }

  // --- TOC Scroll-Spying (for article pages) ---
  const tocLinks = document.querySelectorAll('.toc-list a');
  const headings = document.querySelectorAll('.docs-content h2, .docs-content h3');
  if (tocLinks.length > 0 && headings.length > 0) {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        const id = entry.target.getAttribute('id');
        const tocLink = document.querySelector(`.toc-list a[href="#${id}"]`);
        if (entry.isIntersecting && entry.intersectionRatio > 0.1) {
          tocLinks.forEach(link => link.classList.remove('is-active'));
          if (tocLink) tocLink.classList.add('is-active');
        }
      });
    }, { rootMargin: '0px 0px -80% 0px' });
    headings.forEach(heading => observer.observe(heading));
  }

  // --- Live Search (for homepage) ---
  const searchInput = document.getElementById('docs-search-input');
  if (searchInput) {
    const allCards = Array.from(document.querySelectorAll('.docs-category-card'));
    const allItems = Array.from(document.querySelectorAll('.docs-category-card__item'));
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase().trim();
      if (searchTerm === '') {
        allCards.forEach(c => c.classList.remove('is-hidden'));
        allItems.forEach(i => i.classList.remove('is-hidden'));
        return;
      }
      allItems.forEach(item => {
        const title = item.dataset.docTitle || '';
        item.classList.toggle('is-hidden', !title.includes(searchTerm));
      });
      allCards.forEach(card => {
        const hasVisible = card.querySelector('.docs-category-card__item:not(.is-hidden)');
        card.classList.toggle('is-hidden', !hasVisible);
      });
    });
  }
});
</script>

