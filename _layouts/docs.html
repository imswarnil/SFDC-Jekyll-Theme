---
layout: default
---
<!-- This single layout file handles both the docs homepage and individual article pages -->

<!-- Backdrop for the mobile sidebar navigation, present on all docs pages -->
<div class="docs-sidebar-backdrop" id="docs-sidebar-backdrop"></div>

<div class="sf-container">

  {% if page.url == '/docs/' %}
    <!-- ====================================================== -->
    <!-- DOCS HOMEPAGE VIEW (/docs/)                              -->
    <!-- ====================================================== -->
    <header class="docs-header docs-header--home">
      <h1 class="sf-h1">{{ page.title }}</h1>
      <p class="sf-text--large sf-text--muted">{{ page.description }}</p>
    </header>

    <div class="docs-search">
      <i class="ph-bold ph-magnifying-glass docs-search__icon"></i>
      <input type="search" id="docs-search-input" class="docs-search__input" placeholder="Search articles...">
    </div>

    <div class="docs-category-grid" id="docs-category-grid">
      {% assign docs_by_category = site.docs | group_by: "category" %}
      {% for category in docs_by_category %}
        {% assign category_page = category.items | where_exp: "item", "item.title == 'Overview'" | first %}
        {% assign items = category.items | sort: "order" %}
        <div class="docs-category-card" data-category-name="{{ category.name | downcase }}">
          <header class="docs-category-card__header">
            <i class="ph-bold ph-{{ category_page.category_icon | default: 'folder-simple' }} docs-category-card__icon"></i>
            <h2 class="docs-category-card__title">{{ category.name }}</h2>
            <span class="docs-category-card__count">{{ items.size }}</span>
          </header>
          <ul class="docs-category-card__list">
            {% for doc in items %}
              <li class="docs-category-card__item" data-doc-title="{{ doc.title | downcase }}">
                <a href="{{ doc.url | relative_url }}">
                  <i class="ph-bold ph-file-text"></i>
                  <span>{{ doc.title }}</span>
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>

  {% else %}
    <!-- ====================================================== -->
    <!-- DOCS ARTICLE VIEW (all other pages in /docs/)            -->
    <!-- ====================================================== -->
    <div class="docs-grid docs-grid--article">
      <!-- Left Column: Sidebar Navigation -->
      <aside class="docs-sidebar" id="docs-sidebar">
        <button class="docs-sidebar__close" id="docs-sidebar-close" aria-label="Close navigation"><i class="ph-bold ph-x"></i></button>
        <nav>
          {% assign categories = site.docs | where_exp: "item", "item.title == 'Overview'" | sort: "order" %}
          {% for category_page in categories %}
            <div class="docs-nav-category">
              <h2 class="docs-nav-category__title">
                <i class="ph-bold ph-{{ category_page.category_icon | default: 'folder' }}"></i>
                <span>{{ category_page.category }}</span>
              </h2>
              <ul class="docs-nav-list">
                {% assign docs_in_category = site.docs | where: "category", category_page.category | sort: "order" %}
                {% for doc in docs_in_category %}
                  <li><a href="{{ doc.url | relative_url }}" class="docs-nav-link {% if page.url == doc.url %}is-active{% endif %}">{{ doc.title }}</a></li>
                {% endfor %}
              </ul>
            </div>
          {% endfor %}
        </nav>
      </aside>
      
      <!-- Center Column: Main Content -->
      <main class="docs-main">
        <header class="docs-header">
          <button class="docs-nav-trigger" id="docs-nav-trigger" aria-label="Open navigation"><i class="ph-bold ph-list"></i><span>Browse</span></button>
          <h1 class="sf-h1">{{ page.title }}</h1>
          {% if page.description %}<p class="sf-text--large sf-text--muted">{{ page.description }}</p>{% endif %}
        </header>
        <div class="docs-content">{{ content }}</div>
        
        <!-- Pagination -->
        <nav class="docs-pagination" aria-label="Documentation Pagination">
          {% if page.previous.url %}<a href="{{ page.previous.url | relative_url }}" class="docs-pagination__link docs-pagination__link--prev"><i class="ph-bold ph-arrow-left"></i><span class="docs-pagination__label">Previous</span><span class="docs-pagination__title">{{ page.previous.title }}</span></a>{% endif %}
          {% if page.next.url %}<a href="{{ page.next.url | relative_url }}" class="docs-pagination__link docs-pagination__link--next"><i class="ph-bold ph-arrow-right"></i><span class="docs-pagination__label">Next</span><span class="docs-pagination__title">{{ page.next.title }}</span></a>{% endif %}
        </nav>
      </main>

      <!-- Right Column: Table of Contents & Ads -->
      <aside class="docs-aside">
        {% include toc.html html=content class='toc-list' h_min=2 h_max=3 contents_title='On This Page' %}
        <div class="docs-sponsor-ad">
          <i class="ph-bold ph-hand-heart"></i>
          <span>Sponsor this project</span>
        </div>
      </aside>
    </div>
  {% endif %}
</div>

<!-- All necessary JS in one place -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- Mobile Sidebar Toggle ---
  const sidebar = document.getElementById('docs-sidebar');
  const trigger = document.getElementById('docs-nav-trigger');
  const closeBtn = document.getElementById('docs-sidebar-close');
  const backdrop = document.getElementById('docs-sidebar-backdrop');
  if (sidebar && trigger) {
    const openSidebar = () => { sidebar.classList.add('is-open'); backdrop.classList.add('is-visible'); document.body.style.overflow = 'hidden'; };
    const closeSidebar = () => { sidebar.classList.remove('is-open'); backdrop.classList.remove('is-visible'); document.body.style.overflow = ''; };
    trigger.addEventListener('click', openSidebar);
    closeBtn.addEventListener('click', closeSidebar);
    backdrop.addEventListener('click', closeSidebar);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });
  }

  // --- TOC Scroll-Spying (for article pages) ---
  const tocLinks = document.querySelectorAll('.toc-list a');
  const headings = document.querySelectorAll('.docs-content h2, .docs-content h3');
  if (tocLinks.length > 0 && headings.length > 0) {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        const id = entry.target.getAttribute('id');
        const tocLink = document.querySelector(`.toc-list a[href="#${id}"]`);
        if (entry.isIntersecting && entry.intersectionRatio > 0.1) {
          tocLinks.forEach(link => link.classList.remove('is-active'));
          if (tocLink) tocLink.classList.add('is-active');
        }
      });
    }, { rootMargin: '0px 0px -80% 0px' });
    headings.forEach(heading => observer.observe(heading));
  }

  // --- Live Search (for homepage) ---
  const searchInput = document.getElementById('docs-search-input');
  if (searchInput) {
    const allCards = Array.from(document.querySelectorAll('.docs-category-card'));
    const allItems = Array.from(document.querySelectorAll('.docs-category-card__item'));
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase().trim();
      if (searchTerm === '') {
        allCards.forEach(c => c.classList.remove('is-hidden'));
        allItems.forEach(i => i.classList.remove('is-hidden'));
        return;
      }
      allItems.forEach(item => {
        const title = item.dataset.docTitle || '';
        item.classList.toggle('is-hidden', !title.includes(searchTerm));
      });
      allCards.forEach(card => {
        const hasVisible = card.querySelector('.docs-category-card__item:not(.is-hidden)');
        card.classList.toggle('is-hidden', !hasVisible);
      });
    });
  }
});
</script>