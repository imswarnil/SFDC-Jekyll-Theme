---
layout: default
---

<div class="sf-container" style="padding: var(--sf-8) 0;">
  <div class="category-archive-layout">

    <!-- ======================================================= -->
    <!-- LEFT SIDEBAR: NAVIGATION & ADS                          -->
    <!-- ======================================================= -->
    <aside class="category-archive-sidebar">
      <!-- (The sidebar code is perfect as is, no changes needed) -->
      <div class="sidebar-card">
        <header class="sidebar-card__header"><h3 class="sf-h4 sidebar-card__title">Categories</h3></header>
        <div class="sidebar-card__body">
          <nav><ul class="category-archive-nav">
            {% assign categories = site.categories | sort %}
            {% for category in categories %}
              {% assign category_name = category | first %}
              <li><a href="#{{ category_name | slugify }}" class="category-archive-nav__link"><i class="ph-bold ph-folder-simple"></i><span>{{ category_name }}</span></a></li>
            {% endfor %}
          </ul></nav>
        </div>
      </div>
      <div class="sidebar-card">
        <header class="sidebar-card__header"><h3 class="sf-h4 sidebar-card__title">Tags</h3></header>
        <div class="sidebar-card__body"><p class="sf-text--small sf-text-muted">Tag navigation coming soon.</p></div>
      </div>
    </aside>

    <!-- ======================================================= -->
    <!-- RIGHT CONTENT: POSTS GROUPED BY CATEGORY                -->
    <!-- ======================================================= -->
    <div class="category-archive-content">
      
      {% if site.categories.size > 0 %}
        {% assign categories = site.categories | sort %}
        {% for category in categories %}
          {% assign category_name = category | first %}
          {% assign posts_in_category = site.categories[category_name] %}
          
          <section class="category-group" id="{{ category_name | slugify }}">
            <header class="category-group__header">
              <h2 class="sf-h2">{{ category_name }}</h2>
              <span class="category-group__count">{{ posts_in_category | size }} Posts</span>
            </header>

            <ul class="post-card-grid">
              
              {% for post in posts_in_category %}
                <li>
                  <!-- Using the new, definitive Salesforce Marketing Card component -->
                  <article class="sf-marketing-card">
                    
                    {% if post.feature_image %}
                      <figure class="sf-marketing-card__figure">
                        <img src="{{ post.feature_image | relative_url }}" alt="" loading="lazy">
                      </figure>
                    {% endif %}
                    
                    <div class="sf-marketing-card__content">
                      <div class="sf-marketing-card__meta">
                        <span class="sf-badge sf-badge--brand">{{ post.category }}</span>
                      </div>
                      <h3 class="sf-h4 sf-marketing-card__title">
                        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                      </h3>
                      <p class="sf-marketing-card__excerpt">
                        {{ post.excerpt | strip_html | truncatewords: 20 }}
                      </p>
                      
                      <footer class="sf-marketing-card__footer">
                        <div class="sf-meta-info">
                           <span><i class="ph-bold ph-calendar"></i> {{ post.date | date: "%b %d, %Y" }}</span>
                        </div>
                        {% include button.html text="Read" link=post.url variant="brand" size="sm" %}
                      </footer>
                    </div>
                  </article>
                </li>
                
                {% comment %} --- CORRECTED Automatic Ad Placement Logic --- {% endcomment %}
                {% assign ad_frequency = 3 %}
                {% assign is_last_item = forloop.last %}
                {% if forloop.index | modulo: ad_frequency == 0 and is_last_item == false %}
                  <li>
                    <div class="sf-card adsense-placeholder">
                      <div class="adsense-placeholder__text">
                        <i class="ph-bold ph-presentation-chart"></i>
                        <span>Advertisement</span>
                      </div>
                    </div>
                  </li>
                {% endif %}

              {% endfor %}
            </ul>
          </section>

        {% endfor %}
      {% else %}
        <div class="sf-card">
          <div class="sf-card__body typeset"><h3>No Posts Found</h3><p>...</p></div>
        </div>
      {% endif %}

    </div>
  </div>
</div>