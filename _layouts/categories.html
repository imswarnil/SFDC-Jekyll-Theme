---
layout: default
---

<div class="sf-container" style="padding: var(--sf-8) 0;">
  <div class="category-archive-layout">

    <!-- ======================================================= -->
    <!-- LEFT SIDEBAR: NAVIGATION & ADS                          -->
    <!-- ======================================================= -->
    <aside class="category-archive-sidebar">
      <!-- (Sidebar code remains the same as the refined version) -->
      <div class="sidebar-card">
        <header class="sidebar-card__header"><h3 class="sf-h4 sidebar-card__title">Categories</h3></header>
        <div class="sidebar-card__body">
          <nav>
            <ul class="category-archive-nav">
              {% assign categories = site.categories | sort %}
              {% for category in categories %}
                {% assign category_name = category | first %}
                <li><a href="#{{ category_name | slugify }}" class="category-archive-nav__link"><i class="ph-bold ph-folder-simple"></i><span>{{ category_name }}</span></a></li>
              {% endfor %}
            </ul>
          </nav>
        </div>
      </div>
      <div class="sidebar-card">
        <header class="sidebar-card__header"><h3 class="sf-h4 sidebar-card__title">Tags</h3></header>
        <div class="sidebar-card__body"><p class="sf-text--small sf-text-muted">Tag navigation coming soon.</p></div>
      </div>
    </aside>

    <!-- ======================================================= -->
    <!-- RIGHT CONTENT: POSTS GROUPED BY CATEGORY                -->
    <!-- ======================================================= -->
    <div class="category-archive-content">
      
      {% if site.categories.size > 0 %}
        {% assign categories = site.categories | sort %}
        {% for category in categories %}
          {% assign category_name = category | first %}
          {% assign posts_in_category = site.categories[category_name] %}
          
          <section class="category-group" id="{{ category_name | slugify }}">
            <header class="category-group__header">
              <h2 class="sf-h2">{{ category_name }}</h2>
              <span class="category-group__count">{{ posts_in_category | size }} Posts</span>
            </header>

            <ul class="post-card-grid">
              
              {% comment %} --- Intelligent Ad Placement Logic --- {% endcomment %}
              {% assign ad_positions = "2,5,8,11,15,19" | split: "," %}
              {% for post in posts_in_category %}
                <li>
                  <article class="sf-card slds-post-card" style="position: relative;">
                    {% if post.feature_image %}
                      <figure class="slds-post-card__figure">
                        <img src="{{ post.feature_image | relative_url }}" alt="" loading="lazy">
                      </figure>
                    {% endif %}
                    
                    <div class="slds-post-card__content">
                      <div class="slds-post-card__meta">
                        <span class="sf-badge">{{ post.category }}</span>
                      </div>
                      <h3 class="sf-h4 slds-post-card__title">
                        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                      </h3>
                      <p class="slds-post-card__excerpt">
                        {{ post.excerpt | strip_html | truncatewords: 20 }}
                      </p>
                    </div>

                    <div class="sf-card__footer">
                      <span class="sf-text--small">{{ post.date | date: "%b %d, %Y" }}</span>
                      <!-- Button is removed for a cleaner, full-card-click UX -->
                    </div>
                  </article>
                </li>
                
                {% assign current_index = forloop.index | downcase %}
                {% if ad_positions contains current_index %}
                  <li>
                    <div class="sf-card slds-ad-card">
                      <div class="slds-ad-card__content">
                        <i class="ph-bold ph-presentation-chart"></i>
                        <span>Advertisement</span>
                      </div>
                    </div>
                  </li>
                {% endif %}
                
              {% endfor %}
            </ul>
          </section>

        {% endfor %}
      {% else %}
        <div class="sf-card">
          <div class="sf-card__body typeset">
            <h3>No Posts Found</h3>
            <p>There are no posts with categories yet. Once you add a `category:` to the front matter of a post, it will appear here.</p>
          </div>
        </div>
      {% endif %}
    </div>

  </div>
</div>