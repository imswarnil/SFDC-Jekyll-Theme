---
layout: default
---
{% comment %}
============================================================================
_layouts/resume.html (Definitive, "Masterpiece" All-in-One Final Version)
============================================================================
{% endcomment %}

<!-- ========================================================================
     RESUME HERO
     ======================================================================== -->
<header class="resume-hero">
  <div class="sf-container">
    <div class="resume-hero__grid">
      <div class="resume-hero__text">
        <h1 class="resume-hero__name">{{ page.name }}</h1>
        <h2 class="resume-hero__title">{{ page.title }}</h2>
        <div class="resume-hero__contact-list">
          <a href="tel:{{ page.contact.phone }}"><i class="ph-bold ph-phone"></i> <span>{{ page.contact.phone }}</span></a>
          <a href="mailto:{{ page.contact.email }}"><i class="ph-bold ph-envelope-simple"></i> <span>{{ page.contact.email }}</span></a>
          <a href="{{ page.contact.linkedin }}" target="_blank" rel="noopener"><i class="ph-bold ph-linkedin-logo"></i> <span>LinkedIn</span></a>
          <a href="{{ page.contact.website }}" target="_blank" rel="noopener"><i class="ph-bold ph-globe"></i> <span>{{ page.contact.website | remove: 'https://' }}</span></a>
        </div>
      </div>
      <div class="resume-hero__initials">{{ page.initials }}</div>
    </div>
  </div>
</header>

<!-- ========================================================================
     MAIN TWO-COLUMN RESUME BODY
     ======================================================================== -->
<div class="sf-container" style="padding: var(--sf-8) 0;">
  <div class="resume-grid">
    
    <!-- ======================================================= -->
    <!-- LEFT COLUMN: SUMMARY, EXPERIENCE, PROJECTS, EDUCATION   -->
    <!-- ======================================================= -->
    <main class="resume-main">
      <!-- Summary Section -->
      <section class="resume-section">
        <h2 class="sf-h2 resume-section__title"><span>Summary</span></h2>
        <div class="typeset">{{ page.summary | markdownify }}</div>
      </section>

      <!-- Experience Section -->
      <section class="resume-section">
        <h2 class="sf-h2 resume-section__title"><span>Experience</span></h2>
        <ul class="resume-timeline">
          {% for item in page.experience %}
          <li class="resume-timeline-item">
            <div class="resume-timeline-item__header">
              <h3 class="sf-h3 resume-timeline-item__title">{{ item.role }}</h3>
              <span class="resume-timeline-item__meta"><i class="ph-bold ph-calendar"></i>{{ item.dates }}</span>
            </div>
            <p class="resume-timeline-item__subtitle">{{ item.company }} â€¢ <i class="ph-bold ph-map-pin"></i> {{ item.location }}</p>
            <div class="resume-timeline-item__description typeset">{{ item.description | markdownify }}</div>
          </li>
          {% endfor %}
        </ul>
      </section>

      <!-- Projects Section -->
      <section class="resume-section">
        <h2 class="sf-h2 resume-section__title"><span>Projects</span></h2>
        <ul class="project-list">
        {% for item in page.projects %}
          <li><a href="{{ item.link }}" target="_blank" rel="noopener" class="project-card">
            <header class="project-card__header">
              <i class="ph-bold ph-github-logo"></i>
              <h4 class="sf-h4 project-card__title">{{ item.title }}</h4>
            </header>
            <p class="project-card__description">{{ item.description }}</p>
            <footer class="project-card__footer">
              <span class="project-card__meta-item"><i class="ph-bold ph-star"></i> {{ item.stars }}</span>
              <span class="project-card__meta-item"><i class="ph-bold ph-git-fork"></i> {{ item.forks }}</span>
            </footer>
          </a></li>
        {% endfor %}
        </ul>
      </section>
      
      <!-- Education Section -->
      <section class="resume-section">
        <h2 class="sf-h2 resume-section__title"><span>Education</span></h2>
        <ul class="resume-timeline">
          {% for item in page.education %}
          <li class="resume-timeline-item">
            <div class="resume-timeline-item__header">
              <h3 class="sf-h3 resume-timeline-item__title">{{ item.degree }}</h3>
              <span class="resume-timeline-item__meta">{{ item.dates }}</span>
            </div>
            <p class="resume-timeline-item__subtitle"><i class="ph-bold ph-buildings"></i> {{ item.institution }}</p>
          </li>
          {% endfor %}
        </ul>
      </section>
    </main>

    <!-- ======================================================= -->
    <!-- RIGHT COLUMN: SKILLS, CERTS, ACHIEVEMENTS               -->
    <!-- ======================================================= -->
    <aside class="resume-sidebar">
      <!-- Skills Section -->
      <section class="resume-section">
        <h3 class="sf-h3 resume-section__title"><span>Skills</span></h3>
        <ul class="skill-list">
        {% for item in page.skills %}
          <li><div class="skill-item">
            <i class="ph-bold {{ item.icon | default: 'ph-check-circle' }} skill-item__icon"></i>
            <div class="skill-item__content">
              <h4 class="sf-h5 skill-item__title">{{ item.title }}</h4>
              <p class="skill-item__keywords">{{ item.keywords }}</p>
            </div>
          </div></li>
        {% endfor %}
        </ul>
      </section>

      <!-- Certifications Section -->
      <section class="resume-section">
        <h3 class="sf-h3 resume-section__title"><span>Certifications</span></h3>
        <ul class="cert-list">
        {% for cert in page.certifications %}
          <li>
            <article class="cert-card">
              <div class="cert-card__bg-shape">
                <svg width="100%" height="100%" viewBox="0 0 300 320" preserveAspectRatio="none"><path d="M150 0 L300 80 L300 240 L150 320 L0 240 L0 80 Z" class="shape-bg"></path><path d="M150 0 L300 80 L300 240 L150 320 L0 240 L0 80 Z" class="shape-border"></path></svg>
              </div>
              <div class="cert-card__content">
                <i class="ph-bold {{ cert.icon | default: 'ph-seal-check' }} cert-card__badge-icon"></i>
                <p class="cert-card__label">CERTIFIED</p>
                <h4 class="sf-h3 cert-card__title">{{ cert.title }}</h4>
              </div>
              <footer class="cert-card__footer">
                <span>ID: {{ cert.id }}</span>
                <a href="{{ cert.verify_link }}" target="_blank" rel="noopener">Verify</a>
              </footer>
            </article>
          </li>
        {% endfor %}
        </ul>
      </section>

      <!-- Achievements Section -->
      <section class="resume-section">
        <h3 class="sf-h3 resume-section__title"><span>Key Achievements</span></h3>
        <ul class="achievement-list">
        {% for item in page.achievements %}
          <li><div class="achievement-item">
            <i class="ph-bold ph-trophy achievement-item__icon"></i>
            <div class="achievement-item__content">
              <h4 class="sf-h5 achievement-item__title">{{ item.title }}</h4>
              <p class="achievement-item__description">{{ item.description }}</p>
            </div>
          </div></li>
        {% endfor %}
        </ul>
      </section>
    </aside>

  </div>
</div>

<!-- Button to trigger PDF generation/download -->
<div style="text-align: center; padding-bottom: var(--sf-8);">
  <button id="download-pdf-btn" class="sf-btn sf-btn--brand sf-btn--lg">
    <i class="ph-bold ph-file-pdf"></i>
    <span>Generate & Download PDF</span>
  </button>
</div>

<!-- PDF Generation Modal -->
<div id="pdf-progress-modal">
    <div class="sf-card">
        <div class="sf-card__body">
            <i class="ph-bold ph-spinner"></i>
            <p class="progress-text" id="pdf-progress-text">Generating PDF...</p>
        </div>
    </div>
</div>


<!-- PDF Generation Libraries and Script -->
<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
<script src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- Scroll-activated Animations ---
    const animatedItems = document.querySelectorAll('.resume-section, .resume-timeline-item');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          if (entry.target.matches('.resume-timeline')) {
            const items = entry.target.querySelectorAll('.resume-timeline-item');
            items.forEach((item, index) => {
              item.style.transitionDelay = `${index * 150}ms`;
            });
          }
        }
      });
    }, { threshold: 0.1 });
    animatedItems.forEach(item => observer.observe(item));

    // --- PDF Generation ---
    const downloadBtn = document.getElementById('download-pdf-btn');
    const progressModal = document.getElementById('pdf-progress-modal');
    const progressText = document.getElementById('pdf-progress-text');

    downloadBtn.addEventListener('click', async () => {
      progressModal.style.display = 'grid';
      progressText.textContent = 'Step 1 of 2: Capturing page...';

      // Use a timeout to allow the browser to render the modal before the heavy task
      setTimeout(async () => {
        try {
          const canvas = await html2canvas(document.body, {
            scale: 2,
            logging: false,
            useCORS: true,
            onclone: (doc) => {
              doc.getElementById('download-pdf-btn').style.display = 'none';
              doc.getElementById('pdf-progress-modal').style.display = 'none';
            }
          });
          
          progressText.textContent = 'Step 2 of 2: Building PDF...';

          const imgData = canvas.toDataURL('image/png');
          const { PDFDocument } = PDFLib;
          const pdfDoc = await PDFDocument.create();
          const pngImage = await pdfDoc.embedPng(imgData);
          
          const a4_width_pt = 595.28;
          const a4_height_pt = 841.89;
          
          const pngDims = pngImage.scale(1);
          const aspectRatio = pngDims.width / pngDims.height;
          
          let imgWidth = a4_width_pt;
          let imgHeight = imgWidth / aspectRatio;
          
          let remainingHeight = pngDims.height;
          let y_offset = 0;

          while (remainingHeight > 0) {
            const page = pdfDoc.addPage([a4_width_pt, a4_height_pt]);
            const pageHeightInImagePixels = (a4_height_pt / imgHeight) * pngDims.height;
            
            page.drawImage(pngImage, {
              x: 0,
              y: page.getHeight() - imgHeight, // Draw from top
              width: imgWidth,
              height: imgHeight,
              clip: {
                x: 0,
                y: y_offset,
                width: pngDims.width,
                height: Math.min(pageHeightInImagePixels, remainingHeight)
              }
            });
            
            remainingHeight -= pageHeightInImagePixels;
            y_offset += pageHeightInImagePixels;
          }
          
          const pdfBytes = await pdfDoc.save();
          const blob = new Blob([pdfBytes], { type: 'application/pdf' });
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = '{{ page.name | slugify }}-resume.pdf';
          link.click();

        } catch (error) {
          console.error("PDF Generation Failed:", error);
          progressText.textContent = 'Error! Please try again.';
        } finally {
          setTimeout(() => {
            progressModal.style.display = 'none';
          }, 1000);
        }
      }, 100);
    });
  });
</script>