/* ============================================================================
   BASE / BASE.SCSS (THE DEFINITIVE "SPECIFICATION-COMPLETE" EDITION)
   - Provides a comprehensive modern CSS reset.
   - Sets foundational, non-typographic styles for EVERY common HTML element.
   ============================================================================ */

/* --- 1. MODERN CSS RESET & GLOBAL DEFAULTS --- */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  border-width: 0;
  border-style: solid;
  border-color: var(--border-color, currentColor);
}

html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  scroll-behavior: smooth;
  scroll-padding-top: calc(var(--nav-height) + var(--sf-space-4));
  font-size: 16px;
}

body {
  min-height: 100vh;
}


/* --- 2. GLOBAL DOCUMENT STYLES --- */
body {
  background-color: var(--body-bg);
  color: var(--body-fg);
  transition: background-color .3s ease, color .3s ease;
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

::selection {
  background-color: var(--sf-brand-primary);
  color: #fff;
}


/* ============================================================================
   3. CORE ELEMENT STYLES (NON-TYPOGRAPHIC)
   ============================================================================ */

// --- Media, Figures, and Embedded Content ---
img, picture, video, canvas, svg, figure, iframe, embed, object {
  display: block;
  max-width: 100%;
  height: auto;
  vertical-align: middle;
}
img { font-style: italic; } // Alt text style
figure { margin-block: var(--sf-space-5); }

// --- Horizontal Rule ---
hr {
  display: block;
  border: 0;
  border-top: 1px solid var(--border-color-subtle);
  height: 1px;
  margin-block: var(--sf-space-8);
  padding: 0;
}

// --- Tables ---
table {
  width: 100%;
  margin-bottom: var(--sf-space-5);
  border-collapse: collapse;
  vertical-align: top;
  border: 1px solid var(--border-color-subtle);
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
thead { background-color: var(--sf-bg-1); }
th, td {
  padding: var(--sf-space-3) var(--sf-space-4);
  border: 1px solid var(--border-color-subtle);
}

// --- Forms ---
form { margin-bottom: var(--sf-space-6); }
fieldset {
  border: 1px solid var(--border-color-subtle);
  padding: var(--sf-space-5);
  border-radius: var(--sf-radius-lg);
  margin-bottom: var(--sf-space-4);
}
input, button, textarea, select {
  font: inherit;
  -webkit-appearance: none;
  appearance: none;
  background-color: transparent;
  border-radius: 0;
  width: 100%;
}
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
}
button, [role="button"], input[type="submit"], input[type="reset"], input[type="button"] {
  cursor: pointer;
}
button:disabled, [disabled] {
  cursor: not-allowed;
  opacity: 0.6;
}
textarea { resize: vertical; }
input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; }
input[type="color"] { -webkit-appearance: none; appearance: none; padding: 0; border: none; }
input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
input[type="color"]::-webkit-color-swatch { border: none; border-radius: var(--sf-radius-md); }

// --- Interactive Elements ---
details {
  display: block;
  background-color: var(--sf-bg-2);
  border: 1px solid var(--border-color-subtle);
  border-radius: var(--sf-radius-md);
  padding: var(--sf-space-4);
  margin-bottom: var(--sf-space-4);

  summary {
    cursor: pointer;
    list-style: none;
    &::-webkit-details-marker { display: none; }
    &::before {
      content: 'â–º';
      font-size: 0.8em;
      margin-right: var(--sf-space-2);
      transition: transform 0.2s ease;
    }
  }
  &[open] > summary::before { transform: rotate(90deg); }

  > *:not(summary) {
    margin-top: var(--sf-space-4);
    padding-top: var(--sf-space-4);
    border-top: 1px solid var(--border-color-subtle);
  }
}

dialog {
  background-color: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: var(--card-radius);
  box-shadow: var(--sf-shadow-xl);
  padding: var(--card-padding);
  color: inherit;
  &::backdrop { background-color: var(--sf-backdrop-filter); }
}

// --- Meter & Progress ---
meter, progress {
  -webkit-appearance: none;
  appearance: none;
  display: block;
  width: 100%;
  height: var(--sf-space-2);
  border: 1px solid var(--border-color);
  border-radius: var(--sf-radius-pill);
  background-color: var(--sf-bg-1);
  overflow: hidden;
}
meter::-webkit-meter-bar, progress::-webkit-progress-bar {
  background-color: transparent;
}
meter::-webkit-meter-optimum-value,
meter::-webkit-meter-suboptimum-value,
meter::-webkit-meter-even-less-good-value,
progress::-webkit-progress-value {
  background-color: var(--sf-brand-primary);
  border-radius: var(--sf-radius-pill);
}
meter::-moz-meter-bar, progress::-moz-progress-bar {
  background-color: var(--sf-brand-primary);
  border-radius: var(--sf-radius-pill);
}

// Low value
meter[value^="0.1"]::-webkit-meter-optimum-value,
meter[value^="0.2"]::-webkit-meter-optimum-value {
  background-color: var(--sf-semantic-warning);
}
// High value
meter[value^="0.8"]::-webkit-meter-optimum-value,
meter[value^="0.9"]::-webkit-meter-optimum-value {
  background-color: var(--sf-semantic-success);
}