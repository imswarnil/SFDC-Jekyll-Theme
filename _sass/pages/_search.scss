/* ============================================================================
   PAGE / SEARCH (SLDS PROFESSIONAL EDITION)
   A polished, icon-driven, and highly usable search portal.
   ============================================================================ */

.search-layout {
  // The main container for the search page
}

.search-header {
  text-align: center;
  padding-block: var(--sf-8);
  border-bottom: 1px solid var(--sf-line-2);
  margin-bottom: var(--sf-6);
}

// --- SLDS-Style Search Form ---
.search-form {
  position: relative;
  max-width: var(--sf-container-md);
  margin-inline: auto;
  margin-bottom: var(--sf-6);

  &__icon {
    position: absolute;
    top: 50%;
    left: var(--sf-4);
    transform: translateY(-50%);
    font-size: var(--sf-icon-lg);
    color: var(--sf-muted);
    pointer-events: none;
    transition: opacity .2s ease;
  }
  
  &__spinner {
    position: absolute;
    top: 50%;
    right: var(--sf-4);
    transform: translateY(-50%);
    font-size: var(--sf-icon-lg);
    color: var(--sf-brand);
    animation: spin 1s linear infinite;
    opacity: 0; // Hidden by default
    transition: opacity .2s ease;
  }
  @keyframes spin { to { transform: translateY(-50%) rotate(360deg); } }

  &__input {
    @include control-base(var(--sf-control-lg));
    font-size: var(--sf-text-lg);
    width: 100%;
    padding-left: calc(var(--sf-icon-lg) + var(--sf-4) + var(--sf-3));
    padding-right: calc(var(--sf-icon-lg) + var(--sf-4) + var(--sf-3)); // Space for spinner
  }

  // Show spinner and hide icon when searching
  &.is-searching {
    .search-form__icon { opacity: 0; }
    .search-form__spinner { opacity: 1; }
  }
}

// --- Search Results Area ---
.search-results {
  max-width: var(--sf-container-lg);
  margin-inline: auto;

  &__header {
    @include cluster($justify: space-between, $align: center);
    padding-bottom: var(--sf-4);
    margin-bottom: var(--sf-4);
    border-bottom: 1px solid var(--sf-line-2);
  }
  &__title { font-size: var(--sf-text-lg); font-weight: 600; }
  &__count { /* ... (same as before) ... */ }
  &__list { list-style: none; padding: 0; margin: 0; @include stack($gap: var(--sf-4)); }
}

// --- SLDS-Style Result Item ---
.search-result-item {
  display: block;
  text-decoration: none;
  border-radius: var(--sf-radius-lg);
  transition: all .2s ease;
  
  article {
    @include cluster($gap: var(--sf-4), $align: flex-start);
    padding: var(--sf-4);
    background-color: var(--sf-bg-2);
    border: 1px solid var(--sf-line-2);
    border-radius: inherit;
  }
  
  &__icon {
    flex-shrink: 0;
    @include center;
    width: 48px;
    height: 48px;
    font-size: 1.5rem;
    color: var(--sf-brand);
    background-color: color-mix(in srgb, var(--sf-brand) 10%, transparent);
    border-radius: var(--sf-radius-md);
  }

  &__content { flex: 1; min-width: 0; }
  &__title {
    margin: 0 0 var(--sf-2);
    font-size: var(--sf-text-lg);
    font-weight: 700;
    color: var(--sf-fg);
  }
  &__excerpt {
    margin: 0;
    font-size: var(--sf-text-sm);
    color: var(--sf-fg-2);
    @include truncate(2);
    
    // Highlighted search term
    mark {
      background-color: color-mix(in srgb, var(--sf-warning) 30%, transparent);
      color: inherit;
      border-radius: var(--sf-radius-sm);
      padding-inline: 0.2em;
    }
  }

  // Hover state
  @include hover {
    transform: translateY(-4px);
    box-shadow: var(--sf-shadow-md);
    .search-result-item__title { color: var(--sf-brand); }
  }
}

// --- Status Messages ---
.search-status {
  padding: var(--sf-8);
  text-align: center;
  background-color: var(--sf-bg-2);
  border: 1px dashed var(--sf-line-1);
  border-radius: var(--sf-radius-lg);
  color: var(--sf-muted);
  .ph-bold { font-size: 3rem; margin-bottom: var(--sf-4); color: var(--sf-brand); }
}