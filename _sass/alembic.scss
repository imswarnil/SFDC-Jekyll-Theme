/* ============================================================================
   theme.scss â€” ImSwarnil x Salesforce-ish (Refactored)
   All-in-one SCSS, updated to reflect the Salesforce Lightning Design System.
   ============================================================================ */

/* --------------------------------
   0) TOKENS / VARIABLES
   -------------------------------- */
// UPDATED: Using Salesforce's primary blue as the main brand color.
$brand-primary: #0070d2;
$brand-primary-dark: #005fb2;
$brand-primary-light: #eaf3fa;

// REPLACED: Original grayscale with a cooler, Salesforce-inspired palette.
$slds-gray-1:  #fff;
$slds-gray-2:  #fafafa;
$slds-gray-3:  #f3f3f3; // often used as the main page background
$slds-gray-4:  #eaeaeb;
$slds-gray-5:  #dddbda; // standard border color
$slds-gray-7:  #c9c7c5;
$slds-gray-8:  #999;
$slds-gray-10: #514f4d;
$slds-gray-11: #3e3e3c;
$slds-gray-13: #080707;

$white: #fff; // Kept for clarity

// UPDATED: Status colors to match LDS more closely.
$success: #04844b;
$warning: #ffb75d;
$danger:  #ea001e;
$info:    #0070d2; // Info often uses the brand color

// UPDATED: Switched to a sans-serif stack, the hallmark of the Salesforce UI.
// For the authentic look, you would load the 'Salesforce Sans' font.
$font-sans: 'Salesforce Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
$font-mono: "Consolas", "Courier New", monospace;

// UPDATED: Standardized radius, .25rem is the most common in LDS.
$radius-sm: .125rem;
$radius-md: .25rem;
$radius-lg: .5rem;

// UPDATED: Border and shadows to be more subtle and specific.
$border: 1px solid $slds-gray-5;
$shadow-sm: 0 1px 1px rgba($slds-gray-13, .05);
$shadow-md: 0 2px 2px rgba($slds-gray-13, .10);

$space-0: 0;
$space-1: .25rem;
$space-2: .5rem;
$space-3: .75rem;
$space-4: 1rem;
$space-5: 1.5rem;
$space-6: 2rem;
$space-8: 3rem;

$bp-sm: 40em;
$bp-md: 50em;
$bp-lg: 64em;
$bp-xl: 100em;

$focus-color: $brand-primary;

/* --------------------------------
   1) MIXINS & PLACEHOLDERS
   -------------------------------- */
@mixin focus-ring {
  outline: none;
  box-shadow: 0 0 0 .125rem $brand-primary;
}

@mixin fluid-type($min, $max, $vw-min: 360px, $vw-max: 1440px) {
  font-size: clamp($min, calc(#{$min} + (#{ $max - $min } * ((100vw - #{$vw-min}) / #{ $vw-max - $vw-min }))), $max);
}

@mixin container($max: 1200px) {
  width: 90%;
  max-width: $max;
  margin-inline: auto;
}

// UPDATED: Button base to match LDS style (background change on hover, not inset shadow).
@mixin button-base {
  display: inline-block;
  padding: .5rem 1rem;
  border: $border;
  border-radius: $radius-md;
  line-height: 1.5;
  font-weight: 700;
  font-family: $font-sans;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  transition: background-color .1s, border-color .1s, color .1s, box-shadow .1s;

  &:focus-visible { @include focus-ring; }
}

// UPDATED: Input base to match LDS style.
@mixin input-base {
  width: 100%;
  border: $border;
  border-radius: $radius-md;
  background: $white;
  padding: .5rem .75rem;
  line-height: 1.5;
  transition: border-color .1s, box-shadow .1s;
  &:hover { border-color: $slds-gray-7; }
  &:focus, &:focus-visible { border-color: $brand-primary; @include focus-ring; }
}

%code-bg {
  background-color: $slds-gray-2;
  font-family: $font-mono;
  border: 1px solid $slds-gray-4;
  border-radius: $radius-md;
}

/* --------------------------------
   2) RESET (modernized)
   -------------------------------- */
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
html { text-size-adjust: 100%; }

body {
  margin: 0;
  // NEW: The light gray background is key to the Salesforce app feel.
  background: $slds-gray-3;
  color: $slds-gray-11;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}

img, svg, video, canvas, audio, iframe { display: block; max-width: 100%; height: auto; }

// UPDATED: Simplified link style.
a { color: $brand-primary; text-decoration: none; transition: color .1s; }
a:hover, a:active, a:focus { color: $brand-primary-dark; text-decoration: underline; }
:focus-visible { outline: none; @include focus-ring; }

::selection { background: $brand-primary; color: $white; }

/* --------------------------------
   3) TYPOGRAPHY (replaces .typeset big block)
   -------------------------------- */
body {
  font-family: $font-sans;
  line-height: 1.5;
  @include fluid-type(1rem, 1.1rem);
}

.typeset {
  p, ul, ol, dl {
    line-height: 1.7;
    margin-bottom: 1rem;
  }

  // UPDATED: Removed fancy underline for a cleaner, app-like link style.
  a {
    font-weight: 600;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: $font-sans;
    color: $slds-gray-13;
    font-weight: 700;
    margin-top: 2rem;
    margin-bottom: .75rem;
    line-height: 1.25;
  }

  h1 { @include fluid-type(1.8rem, 2.25rem); }
  h2 { @include fluid-type(1.5rem, 1.875rem); }
  h3 { @include fluid-type(1.25rem, 1.5rem); }
  h4 { @include fluid-type(1.1rem, 1.25rem); }
  h5, h6 { @include fluid-type(1rem, 1.1rem); }

  strong { font-weight: 700; }
  em, i { font-style: italic; }

  .caption { color: $slds-gray-8; font-size: .875rem; line-height: 1.5; margin-bottom: 1rem; }

  // UPDATED: Blockquote styled more like an LDS 'scoped notification'.
  blockquote {
    border-left: 3px solid $slds-gray-5;
    padding-left: 1.5rem;
    margin-left: 0;
    margin-bottom: 1.5rem;
    color: $slds-gray-10;
    p { margin-bottom: 0; }
  }

  // UPDATED: HR is now a simple, clean line.
  hr { border: 0; border-top: $border; margin-block: 2rem; }

  code { @extend %code-bg; font-size: .9rem; padding: .125rem .375rem; color: $slds-gray-11; border: 1px solid $slds-gray-4; }
  pre  { @extend %code-bg; display: block; padding: 1rem; margin-bottom: 1.5rem; overflow-x: auto;
         code { padding: 0; background: none; border: none; } }

  // List refinements are mostly good, just minor tweaks.
  ul, ol { margin-bottom: 1rem; padding-left: 1.5rem; }
  li > p { padding: 0; margin: 0; }
}

/* --------------------------------
   4) LAYOUT (header/footer/feature/main/aside)
   -------------------------------- */
.container { @include container(1200px); }

.header {
  flex: 0 0 auto;
  // NEW: A white header with a bottom border is a classic Salesforce pattern.
  background: $white;
  border-bottom: $border;
  box-shadow: $shadow-sm;

  .container { display: flex; justify-content: space-between; align-items: center; padding-block: .75rem; flex-wrap: wrap; }
  .logo img { max-height: 2.5rem; } // LDS headers are more compact
  .nav { text-align: right; }
}

.footer {
  background: $slds-gray-11;
  color: $slds-gray-5;
  padding-block: 2rem;
  a { color: $slds-gray-5; &:hover { color: $white; } }
}

// UPDATED: Re-styled as a lighter "welcome mat" or informational banner.
.feature {
  text-align: center;
  background: $brand-primary-light;
  padding-block: 3rem;
  margin-bottom: $space-6;

  .container { max-width: 60%; }
}

.main {
  flex: 1 0 auto;
  @media (min-width: $bp-sm) { display: flex; justify-content: center; }
}

// NEW: This is the most important layout change. Content lives on a white "canvas".
.content {
  background: $white;
  border-radius: $radius-md;
  border: $border;
  padding: $space-5;
  margin-bottom: $space-6;
  @media (min-width: $bp-sm) { width: 62%; }
}

.aside {
  margin-top: $space-4;
  @media (min-width: $bp-sm) {
    max-width: 34%; margin-left: 4%; flex: 1 0 auto;
    .section { position: sticky; top: $space-4; }
  }
  &--left {
    @media (min-width: $bp-sm) { margin-left: 0; margin-right: 4%; order: -1; }
  }
}

/* --------------------------------
   5) NAV
   -------------------------------- */
.nav a { padding: .2rem .5rem; font-weight: 600; }
.nav--social a { display: inline-block; line-height: 1; }
.list--nav { overflow: hidden; }
.item--nav { @media (min-width: $bp-sm) { margin-left: .4rem; display: inline-block; } }
.item--current a { color: $slds-gray-11; font-weight: 700; cursor: default; &:hover { text-decoration: none; } }

/* --------------------------------
   6) BUTTONS
   -------------------------------- */
// UPDATED: Button styling to match LDS variants.
.button, button, input[type="submit"] {
  @include button-base;
  color: $white;
  background: $brand-primary;
  border-color: $brand-primary;
  &:hover { background: $brand-primary-dark; border-color: $brand-primary-dark; }
}

.button--neutral {
  background: $white;
  color: $slds-gray-11;
  border-color: $slds-gray-5;
  &:hover { background: $slds-gray-2; }
}

.button--outline {
  background: transparent;
  color: $brand-primary;
  border-color: $brand-primary;
  &:hover { background: $brand-primary-light; }
}

.button--destructive {
  background: $danger;
  color: $white;
  border-color: $danger;
  &:hover { background: darken($danger, 8%); border-color: darken($danger, 8%); }
}
.button--success {
  background: $success;
  color: $white;
  border-color: $success;
  &:hover { background: darken($success, 8%); border-color: darken($success, 8%); }
}

/* --------------------------------
   7) FORMS
   -------------------------------- */
.form { position: relative; margin-bottom: 1rem; }

// UPDATED: Labels now sit above inputs, a common UI pattern.
label {
  display: block;
  font-weight: 700;
  font-size: .875rem;
  margin-bottom: .5rem;
}

input[type="text"],
input[type="email"],
input[type="search"],
input[type="color"],
textarea,
select { @include input-base; }

textarea { resize: vertical; min-height: 8rem; }
select { appearance: none; background: $white url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") right .75rem center/16px 12px no-repeat; }

.required { color: $danger; }

/* --------------------------------
   8) MEDIA / FIGURES / MAPS
   -------------------------------- */
.figure { margin-bottom: 1rem;
  &--left  { float: left; padding-right: 1rem; }
  &--right { float: right; padding-left: 1rem; }
  &--center{ text-align: center; clear: both; }
}
.video, .map { position: relative; height: 0; padding-bottom: 56.25%; border-radius: $radius-md; overflow: hidden;
               iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; } }
.map { padding-bottom: 70%; }
audio, video { width: 100%; }

/* --------------------------------
   9) TABLES
   -------------------------------- */
// UPDATED: Table styles to match the clean, bordered look of LDS.
.typeset table {
  width: 100%;
  font-family: $font-sans;
  font-feature-settings: 'liga','lnum','tnum','kern';
  font-size: .9rem;
  border: $border;
  border-collapse: collapse;
  border-radius: $radius-md;
  overflow: hidden;

  th, td { padding: .75rem 1rem; text-align: left; border-bottom: $border; }
  thead th {
    font-weight: 700;
    background: $slds-gray-2;
    border-bottom: 2px solid $slds-gray-5;
  }
  tbody tr:last-child td { border-bottom: 0; }
  tbody tr:hover { background-color: $slds-gray-2; }
}

/* --------------------------------
   10) PAGINATION
   -------------------------------- */
.nav--paginator { display: flex; justify-content: space-between; align-items: center; color: $slds-gray-8; }
.pagination { min-width: 20%; }

/* --------------------------------
   11) UTILITIES
   -------------------------------- */
.small { font-size: .875rem; color: $slds-gray-8; }
.icon { vertical-align: middle; width: 1em; height: 1em; fill: currentColor; }
.mt-0{margin-top:0}.mb-0{margin-bottom:0}
.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}
.pt-4{padding-top:1rem}.pb-4{padding-bottom:1rem}
.hidden { display: none !important; }
.sr-only { position: absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* --------------------------------
   12) ACCESSIBILITY STATES / FOCUS
   -------------------------------- */
// Consolidated for simplicity, the mixin handles the heavy lifting
// This section is now largely covered by the mixins.

/* --------------------------------
   13) OPTIONAL DARK MODE (toggle via data-theme="dark" on <html>)
   -------------------------------- */
:root[data-theme="dark"] {
  // NEW: Dark mode variables for a more modern palette
  --bg-dark: #111827;
  --bg-dark-card: #1f2937;
  --fg-dark: #d1d5db;
  --border-dark: #374151;
  --muted-dark: #6b7280;

  body { background: var(--bg-dark); color: var(--fg-dark); }
  .header { background: var(--bg-dark-card); border-bottom-color: var(--border-dark); }
  .content { background: var(--bg-dark-card); border-color: var(--border-dark); }
  .feature { background: var(--bg-dark); }
  .footer { background: #000; color: var(--muted-dark); a { color: var(--muted-dark); &:hover { color: $white; }} }

  .typeset {
    a { color: #60a5fa; &:hover { color: #93c5fd; } }
    h1, h2, h3, h4, h5, h6 { color: #f9fafb; }
    blockquote { border-left-color: var(--border-dark); color: var(--muted-dark); }
    hr { border-top-color: var(--border-dark); }
    code, pre { background-color: var(--bg-dark); border-color: var(--border-dark); color: var(--fg-dark); }
    table { border-color: var(--border-dark); }
    thead th { background: #111827; border-bottom-color: #4b5563; }
    tbody td { border-bottom-color: var(--border-dark); }
    tbody tr:hover { background-color: #374151; }
  }

  input, textarea, select {
    background-color: var(--bg-dark-card);
    border-color: var(--border-dark);
    color: var(--fg-dark);
    &:hover { border-color: var(--muted-dark); }
  }
}