// _sass/_theme.scss
// The complete, consolidated theme file for the SLDS-inspired design system.
// This single file contains the entire framework: reset, grid, layout,
// typography, all components, and utilities.
// -------------------------------------------------------------------

// --- 0. TOOLS & MIXINS ---
@mixin breakpoint($size) {
  @if map-has-key($breakpoints, $size) {
    @media (min-width: map-get($breakpoints, $size)) { @content; }
  } @else {
    @warn "Breakpoint '#{$size}' not found in $breakpoints map.";
  }
}

// --- 1. GENERIC: RESET & NORMALIZE ---
*, *::before, *::after { box-sizing: border-box; }
html {
  line-height: 1.15; -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}
body {
  margin: 0; background-color: $sfdc-background-primary; color: $sfdc-text-default;
  font-family: $sfdc-font-family-base; font-size: $font-size-base;
  line-height: $line-height-base; display: flex; flex-direction: column;
  min-height: 100vh;
}
main, article, aside, details, figcaption, figure, footer, header, nav, section { display: block; }
h1, h2, h3, h4, h5, h6, p, blockquote, pre, dl, dd, ol, ul, figure { margin: 0; }
ol, ul { padding: 0; list-style: none; }
img, video { max-width: 100%; height: auto; display: block; }
a { background-color: transparent; text-decoration: none; }
b, strong { font-weight: bolder; }
button, input, select, textarea { font: inherit; margin: 0; }
table { border-collapse: collapse; border-spacing: 0; }

// --- 2. LAYOUT: GRID & CONTAINER ---
.container {
  width: 100%; max-width: $container-max-width;
  margin-left: auto; margin-right: auto;
  padding-left: $container-padding; padding-right: $container-padding;
}
.row {
  display: flex; flex-wrap: wrap;
  margin-left: calc(-1 * #{$grid-gutter-width} / 2);
  margin-right: calc(-1 * #{$grid-gutter-width} / 2);
}
.col, [class^="col-"] {
  position: relative; width: 100%;
  padding-left: calc(#{$grid-gutter-width} / 2);
  padding-right: calc(#{$grid-gutter-width} / 2);
}
@for $i from 1 through $grid-columns {
  .col-#{$i} { flex: 0 0 auto; width: percentage($i / $grid-columns); }
}
@each $name, $value in $breakpoints {
  @include breakpoint($name) {
    @for $i from 1 through $grid-columns {
      .col-#{$name}-#{$i} { flex: 0 0 auto; width: percentage($i / $grid-columns); }
    }
  }
}
.site-main {
  flex-grow: 1; padding-top: $spacing-xx-large; padding-bottom: $spacing-xx-large;
}

// --- 3. ELEMENTS: BASE TYPOGRAPHY & FORMS ---
.typeset { // Class for wrapping long-form content like blog posts
  max-width: $content-max-width;
  h1, h2, h3, h4, h5, h6 {
    font-family: $sfdc-font-family-heading; font-weight: $font-weight-bold;
    line-height: $line-height-heading; color: $sfdc-text-heading;
    margin: $spacing-large 0 $spacing-medium 0;
  }
  h1 { font-size: $font-size-h1; }
  h2 { font-size: $font-size-h2; }
  h3 { font-size: $font-size-h3; }
  h4 { font-size: $font-size-h4; }

  p { margin: 0 0 $spacing-medium; &:last-child { margin-bottom: 0; } }
  a {
    color: $sfdc-brand-accessible;
    box-shadow: inset 0 -2px 0 rgba($sfdc-brand-blue, 0.2);
    transition: $sfdc-transition-base;
    &:hover, &:focus { box-shadow: inset 0 -2px 0 rgba($sfdc-brand-blue, 0.5); background-color: rgba($sfdc-brand-blue, 0.05); }
  }
  ul, ol {
    margin: 0 0 $spacing-medium $spacing-large;
    li { margin-bottom: $spacing-x-small; }
  }
  ul { list-style-type: disc; }
  ol { list-style-type: decimal; }

  blockquote {
    margin: 0 0 $spacing-large 0; padding: $spacing-medium $spacing-large;
    border-left: 4px solid $sfdc-border-color;
    background-color: $sfdc-background-secondary;
    font-style: italic; color: $sfdc-text-weak;
  }
  hr { border: 0; border-top: $sfdc-border; margin: $spacing-xx-large 0; }
  
  table {
    width: 100%; margin-bottom: $spacing-large; font-size: $font-size-sm;
    th, td { border: $sfdc-border; padding: $spacing-small $spacing-medium; }
    thead th { font-weight: $font-weight-bold; background-color: $sfdc-background-code-light; }
    tbody tr:nth-child(odd) { background-color: $sfdc-background-code-light; }
  }
}
.form-group { margin-bottom: $spacing-medium; }
label { display: block; font-weight: $font-weight-bold; margin-bottom: $spacing-x-small; }
input[type="text"], input[type="email"], textarea, select {
  display: block; width: 100%; padding: $spacing-small $spacing-medium;
  font-size: $font-size-base; color: $sfdc-text-default;
  background-color: $sfdc-background-secondary; border: $sfdc-border;
  border-radius: $sfdc-border-radius; transition: $sfdc-transition-base;
  &:focus { outline: 0; border-color: $sfdc-border-color-focus; box-shadow: $sfdc-box-shadow-focus-ring; }
}
textarea { resize: vertical; min-height: 120px; }

// --- 4. COMPONENTS ---

// Navbar / Header
.site-header {
  background-color: $sfdc-background-secondary; border-bottom: $sfdc-border;
  padding: $spacing-small 0; box-shadow: $sfdc-box-shadow;
  position: sticky; top: 0; z-index: $z-index-sticky;

  .container { display: flex; justify-content: space-between; align-items: center; }
}
.site-logo img { max-height: 2.5rem; display: block; }
.main-nav {
  ul { list-style: none; margin: 0; padding: 0; display: flex; align-items: center; gap: $spacing-x-small; }
  a {
    display: block; color: $sfdc-text-default; font-weight: $font-weight-bold;
    padding: $spacing-small $spacing-medium; border-radius: $sfdc-border-radius;
    &.active, &:hover, &:focus { background-color: rgba($sfdc-brand-blue, 0.05); color: $sfdc-brand-accessible; text-decoration: none; outline: none; }
  }
}
.nav-toggle {
  display: none; // Add logic for mobile menu toggle
  @include breakpoint(md) { display: none; }
}

// Card
.card {
  background-color: $sfdc-background-secondary; border: $sfdc-border;
  border-radius: $sfdc-border-radius; box-shadow: $sfdc-box-shadow;
  transition: $sfdc-transition-base; display: flex; flex-direction: column;
  height: 100%;
  
  &-body { padding: $spacing-large; flex-grow: 1; }
  &-header, &-footer {
    padding: $spacing-medium $spacing-large;
    background-color: $sfdc-background-code-light;
    border-bottom: $sfdc-border;
  }
  &-header { border-radius: $sfdc-border-radius $sfdc-border-radius 0 0; }
  &-footer { border-top: $sfdc-border; border-bottom: 0; }
  
  &:hover { transform: translateY(-3px); box-shadow: $sfdc-box-shadow-lg; }
}
.post, .page {
  background-color: $sfdc-background-secondary; border: $sfdc-border;
  border-radius: $sfdc-border-radius; box-shadow: $sfdc-box-shadow;
  padding: $spacing-x-large; margin-bottom: $spacing-large;
}

// Button
.btn {
  display: inline-block; font-weight: $font-weight-bold; text-align: center;
  cursor: pointer; border: $sfdc-border-width solid transparent;
  padding: $spacing-small $spacing-large; font-size: $font-size-base;
  line-height: $line-height-base; border-radius: $sfdc-border-radius;
  transition: $sfdc-transition-base; text-decoration: none;
  &:hover { text-decoration: none; }
  &:focus { outline: 0; box-shadow: $sfdc-box-shadow-focus-ring; }
}
.btn-primary {
  color: $sfdc-text-inverse; background-color: $sfdc-brand-blue; border-color: $sfdc-brand-blue;
  &:hover, &:focus { background-color: $sfdc-brand-blue-dark; border-color: $sfdc-brand-blue-dark; }
}
.btn-neutral {
  color: $sfdc-text-default; background-color: $sfdc-background-secondary; border-color: $sfdc-border-color;
  &:hover, &:focus { background-color: darken($sfdc-background-secondary, 5%); }
}

// Alerts
.alert {
  padding: $spacing-medium; margin-bottom: $spacing-medium;
  border: $sfdc-border-width solid transparent; border-radius: $sfdc-border-radius;
  border-left-width: 4px;
  &-success { border-left-color: $sfdc-success; background-color: lighten($sfdc-success, 45%); }
  &-error { border-left-color: $sfdc-error; background-color: lighten($sfdc-error, 40%); }
}

// Code & Syntax Highlighting (Dark Theme)
code {
  font-family: $sfdc-font-family-mono; background-color: $sfdc-background-code-light;
  padding: $spacing-xx-small $spacing-x-small; border-radius: $sfdc-border-radius;
  font-size: $font-size-sm; border: 1px solid $sfdc-border-color-weak;
}
.highlight {
  background-color: $sfdc-background-code;
  border-radius: $sfdc-border-radius-lg; margin: $spacing-large 0;
  font-size: $font-size-sm; color: #d4d4d4;
  pre {
    margin: 0; padding: $spacing-large; overflow-x: auto;
    code { background: none; border: 0; padding: 0; font-size: inherit; color: inherit; }
  }
  .c, .c1 { color: #6A9955; font-style: italic; } // Comment -> Green
  .k, .kd { color: #569CD6; } // Keyword -> Blue
  .s, .s2 { color: #CE9178; } // String -> Orange
  .nb, .nf { color: #DCDCAA; } // Name.Builtin, Name.Function -> Yellow
  .mi, .m { color: #B5CEA8; } // Literal.Number -> Light Green
  .p { color: #d4d4d4; } // Punctuation -> Default
  .nt { color: #569CD6; } // Name.Tag -> Blue
  .na { color: #9CDCFE; } // Name.Attribute -> Light Blue
}

// Pagination
.pagination {
  display: flex; justify-content: space-between; align-items: center;
  margin-top: $spacing-x-large; padding-top: $spacing-large; border-top: $sfdc-border;
  .previous_page, .next_page { @extend .btn; @extend .btn-neutral; }
  .page_number { font-size: $font-size-sm; color: $sfdc-text-weak; }
}

// Footer
.site-footer {
  background-color: $sfdc-background-dark; color: rgba($sfdc-text-inverse, 0.7);
  padding: $spacing-x-large 0; margin-top: auto; font-size: $font-size-sm;
  a { color: $sfdc-text-inverse; &:hover, &:focus { color: $sfdc-text-link-inverse; text-decoration: underline; } }
}

// --- 5. UTILITIES ---
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }
.visually-hidden {
  position: absolute; width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
}
@each $prop, $abbrev in (margin: m, padding: p) {
  @each $side, $suffix in (top: t, right: r, bottom: b, left: l) {
    @each $key, $value in $spacings {
      .#{$abbrev}#{$suffix}-#{$key} { #{$prop}-#{$side}: $value !important; }
    }
  }
  @each $key, $value in $spacings {
    .#{$abbrev}x-#{$key} { #{$prop}-left: $value !important; #{$prop}-right: $value !important; }
    .#{$abbrev}y-#{$key} { #{$prop}-top: $value !important; #{$prop}-bottom: $value !important; }
  }
}

// Text Selection Color
::selection { background-color: $sfdc-brand-blue; color: $sfdc-text-inverse; text-shadow: none; }