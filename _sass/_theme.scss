// _sass/_theme.scss
// The complete, consolidated theme file for the SLDS-inspired design system.
// It contains all styles for layout, typography, components, and utilities.
// -------------------------------------------------------------------

// --- 0. Tools ---
// A simple mixin for generating media queries from our variables map.
@mixin breakpoint($size) {
  @if map-has-key($breakpoints, $size) {
    $value: map-get($breakpoints, $size);
    @media (min-width: $value) { @content; }
  } @else {
    @warn "Breakpoint '#{$size}' not found in $breakpoints map.";
  }
}

// --- 1. Generic Resets & Base Styles ---
// Replaces both normalize.css and the aggressive old reset.
*, *::before, *::after { box-sizing: border-box; }
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  scroll-behavior: smooth;
}
body {
  margin: 0;
  background-color: $sfdc-background-primary;
  color: $sfdc-text-default;
  font-family: $sfdc-font-family-base;
  font-size: $font-size-base;
  line-height: $line-height-base;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
img, video { max-width: 100%; height: auto; display: block; }
button, input, select, textarea { font: inherit; }

// --- 2. Layout & Grid ---
.container {
  width: 100%;
  max-width: $container-max-width;
  margin-left: auto;
  margin-right: auto;
  padding-left: $container-padding;
  padding-right: $container-padding;
}
.site-main {
  flex-grow: 1;
  padding-top: $spacing-x-large;
  padding-bottom: $spacing-x-large;
}
// 2-column layout for main content + sidebar
.content-layout {
  display: grid;
  gap: $spacing-x-large;
  @include breakpoint(lg) {
    grid-template-columns: 1fr 320px;
  }
}
.content-area, .sidebar-area { min-width: 0; } // Prevents grid overflow

// --- 3. Header (Navbar) ---
.site-header {
  background-color: $sfdc-background-secondary;
  border-bottom: $sfdc-border;
  padding: $spacing-small 0;
  box-shadow: $sfdc-box-shadow;
  position: sticky; top: 0; z-index: $z-index-sticky;

  .container { display: flex; justify-content: space-between; align-items: center; }
}
.site-logo img { max-height: 2.5rem; display: block; }
.main-nav {
  ul { list-style: none; margin: 0; padding: 0; display: flex; align-items: center; gap: $spacing-x-small; }
  a {
    display: block; color: $sfdc-text-default; font-weight: $font-weight-bold;
    padding: $spacing-small $spacing-medium; border-radius: $sfdc-border-radius;
    transition: $sfdc-transition-base;
    &.active, &:hover, &:focus {
      background-color: rgba($sfdc-brand-blue, 0.05); color: $sfdc-brand-accessible;
      text-decoration: none; outline: none;
    }
  }
}

// --- 4. Footer ---
.site-footer {
  background-color: $sfdc-background-dark; color: $sfdc-text-inverse;
  padding: $spacing-x-large 0; margin-top: auto; font-size: $font-size-small;
  a { color: $sfdc-text-link-inverse; &:hover, &:focus { text-decoration: underline; } }
}

// --- 5. Content Typography (`.typeset` class) ---
// This class should wrap any long-form content like blog posts.
.typeset {
  max-width: $content-max-width; // Apply ideal reading width

  h1, h2, h3, h4, h5, h6 {
    font-family: $sfdc-font-family-heading; font-weight: $font-weight-bold;
    line-height: $line-height-heading; color: $sfdc-text-heading;
    margin: $spacing-large 0 $spacing-medium 0;
  }
  h1 { font-size: 2rem; }
  h2 { font-size: 1.5rem; }
  h3 { font-size: 1.25rem; }
  h4 { font-size: 1.1rem; }

  p { margin: 0 0 $spacing-medium; }
  a {
    color: $sfdc-brand-accessible; text-decoration: none;
    transition: $sfdc-transition-base;
    box-shadow: inset 0 -2px 0 rgba($sfdc-brand-blue, 0.2); // Subtle underline
    &:hover, &:focus {
      box-shadow: inset 0 -2px 0 rgba($sfdc-brand-blue, 0.5);
      background-color: rgba($sfdc-brand-blue, 0.05);
      text-decoration: none;
    }
  }
  ul, ol {
    margin: 0 0 $spacing-medium $spacing-large; padding: 0;
    li { margin-bottom: $spacing-x-small; }
  }
  ul { list-style-type: disc; }
  ol { list-style-type: decimal; }

  blockquote {
    margin: 0 0 $spacing-large 0; padding: $spacing-medium;
    border-left: 4px solid $sfdc-border-color;
    font-style: italic; color: $sfdc-text-weak;
  }
  hr { border: 0; border-top: $sfdc-border; margin: $spacing-xx-large 0; }
  
  table {
    width: 100%; margin-bottom: $spacing-large; font-size: $font-size-small;
    border-collapse: collapse;
    th, td {
      border: $sfdc-border; padding: $spacing-small $spacing-medium;
      text-align: left; vertical-align: top;
    }
    thead th {
      font-weight: $font-weight-bold; background-color: $sfdc-code-background;
      border-bottom-width: 2px;
    }
    tbody tr:nth-child(odd) { background-color: $sfdc-code-background; }
  }
}

// --- 6. Components ---

// Card
.card {
  background-color: $sfdc-background-secondary; border: $sfdc-border;
  border-radius: $sfdc-border-radius; box-shadow: $sfdc-box-shadow;
  transition: $sfdc-transition-base;
  &-body { padding: $spacing-large; }
  &:hover { transform: translateY(-2px); box-shadow: $sfdc-box-shadow-lg; }
}
.post, .page { @extend .card; padding: $spacing-large; margin-bottom: $spacing-large; }

// Button
.btn {
  display: inline-block; font-weight: $font-weight-bold; text-align: center;
  cursor: pointer; border: $sfdc-border-width solid transparent;
  padding: $spacing-small $spacing-large; font-size: $font-size-base;
  line-height: $line-height-base; border-radius: $sfdc-border-radius;
  transition: $sfdc-transition-base; text-decoration: none;
  &:hover { text-decoration: none; }
  &:focus { outline: 0; box-shadow: $sfdc-box-shadow-focus-ring; }
}
.btn-primary {
  color: $sfdc-text-inverse; background-color: $sfdc-brand-blue; border-color: $sfdc-brand-blue;
  &:hover, &:focus { background-color: $sfdc-brand-blue-dark; border-color: $sfdc-brand-blue-dark; }
}
.btn-neutral {
  color: $sfdc-text-default; background-color: $sfdc-background-secondary; border-color: $sfdc-border-color;
  &:hover, &:focus { background-color: darken($sfdc-background-secondary, 5%); }
}

// Forms
.form-group { margin-bottom: $spacing-medium; }
label { display: block; font-weight: $font-weight-bold; margin-bottom: $spacing-x-small; }
input[type="text"], input[type="email"], textarea, select {
  display: block; width: 100%; padding: $spacing-small $spacing-medium;
  font-size: $font-size-base; color: $sfdc-text-default;
  background-color: $sfdc-background-secondary; border: $sfdc-border;
  border-radius: $sfdc-border-radius; transition: $sfdc-transition-base;
  &:focus { outline: 0; border-color: $sfdc-border-color-focus; box-shadow: $sfdc-box-shadow-focus-ring; }
}
textarea { resize: vertical; min-height: 120px; }

// Code & Syntax Highlighting
code {
  font-family: $sfdc-font-family-mono; background-color: $sfdc-code-background;
  padding: $spacing-xx-small $spacing-x-small; border-radius: $sfdc-border-radius;
  font-size: $font-size-small; border: 1px solid $sfdc-border-color-weak;
}
.highlight {
  background-color: $sfdc-code-background; border: 1px solid $sfdc-border-color-weak;
  border-radius: $sfdc-border-radius; margin: 0 0 $spacing-large 0;
  font-size: $font-size-small;
  pre {
    margin: 0; padding: $spacing-medium; overflow-x: auto;
    code { background: none; border: 0; padding: 0; font-size: inherit; }
  }
  .c, .c1 { color: $sfdc-info; font-style: italic; } // Comment
  .k { color: #580d8c; } // Keyword
  .s, .s2 { color: $sfdc-success; } // String
  .nb, .nf { color: $sfdc-brand-accessible; } // Name.Builtin, Name.Function
  .mi { color: #c96708; } // Literal.Number
}

// Pagination
.pagination {
  display: flex; justify-content: space-between; align-items: center;
  margin-top: $spacing-x-large; padding-top: $spacing-large; border-top: $sfdc-border;
  .previous_page, .next_page { @extend .btn; @extend .btn-neutral; }
  .page_number { font-size: $font-size-small; color: $sfdc-text-weak; }
}

// Feature Section / Hero
.feature {
  padding: $spacing-xx-large $container-padding; text-align: center;
  background-color: $sfdc-background-dark; color: $sfdc-text-inverse;
  h1, h2, h3 { color: $sfdc-text-inverse; margin-top: 0; }
}

// --- 7. Utilities ---
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }
.mb-0 { margin-bottom: 0 !important; }
.mb-4 { margin-bottom: $spacing-large !important; }
.mt-4 { margin-top: $spacing-large !important; }
.visually-hidden {
  position: absolute; width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
}

// Text Selection Color
::selection {
  background-color: $sfdc-brand-blue; color: $sfdc-text-inverse;
  text-shadow: none;
}