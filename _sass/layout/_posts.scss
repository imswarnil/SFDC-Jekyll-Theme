/* ============================================================================
   COMPONENTS / POST.SCSS
   A modern, responsive, and ad-ready blog post layout.
   ============================================================================ */

/* --- Main Layout Grid --- */
.post-container {
  display: grid;
  gap: var(--sf-8);
  padding-block: var(--sf-8);
  max-width: 1600px; /* Max width for the 3-column layout */
  margin-inline: auto;
  padding-inline: var(--sf-container-padding);
  
  // Mobile-first: single column
  grid-template-columns: minmax(0, 1fr);

  // Tablet & Desktop: Content + Right Sidebar
  @include breakpoint(md) {
    grid-template-columns: minmax(0, 1fr) 280px; // Flexible content, fixed sidebar
  }

  // Wide Desktop: Left Ad + Content + Right Sidebar
  @include breakpoint(xl) {
    grid-template-columns: 160px minmax(0, var(--sf-measure)) 300px;
    gap: var(--sf-10);
  }
}

/* --- Left Skyscraper Ad --- */
.post-skyscraper-left {
  display: none; // Hidden by default
  @include breakpoint(xl) {
    display: block;
    position: sticky;
    top: calc(var(--sf-nav-height) + var(--sf-6)); // Align below navbar
    height: 600px;
  }
}

/* --- Main Article Wrapper --- */
.post-article-wrapper {
  position: relative; // Anchor for the floating share bar
  @include breakpoint(md) {
    grid-column: 1 / 2;
  }
  @include breakpoint(xl) {
    grid-column: 2 / 3;
  }
}

/* --- Post Header & Meta --- */
.post-header {
  margin-bottom: var(--sf-6);
}
.post-category {
  display: inline-block;
  font-size: var(--sf-text-sm);
  font-weight: 600;
  color: var(--sf-brand);
  text-decoration: none;
  margin-bottom: var(--sf-3);
}
.post-title {
  font-size: var(--sf-text-3xl);
  font-weight: 800;
  margin: 0 0 var(--sf-4) 0;
  line-height: var(--sf-leading-tight);
}
.post-meta {
  @include cluster(var(--sf-2), center);
  color: var(--sf-fg-2);
  &__separator { color: var(--sf-line-1); }
}

/* --- Feature Image --- */
.post-feature-image {
  margin: 0 0 var(--sf-6) 0;
  img {
    width: 100%;
    border-radius: var(--sf-radius-lg);
    border: 1px solid var(--sf-line-2);
  }
  figcaption {
    font-size: var(--sf-text-sm);
    color: var(--sf-muted);
    text-align: center;
    margin-top: var(--sf-2);
  }
}

/* --- Post Content & Typography --- */
.post-content.typeset {
  color: var(--sf-fg);
  line-height: var(--sf-leading-relaxed);
  
  p, ul, ol, blockquote { margin-bottom: var(--sf-5); }
  h2, h3, h4 { 
    margin: var(--sf-8) 0 var(--sf-4) 0;
    line-height: var(--sf-leading-tight);
    font-weight: 700;
  }
  h2 { font-size: var(--sf-text-2xl); }
  h3 { font-size: var(--sf-text-xl); }
  
  a {
    color: var(--sf-link);
    text-decoration: none;
    font-weight: 500;
    border-bottom: 2px solid color-mix(in srgb, var(--sf-brand) 20%, transparent);
    transition: all .2s ease;
    &:hover {
      background-color: color-mix(in srgb, var(--sf-brand) 10%, transparent);
      border-bottom-color: var(--sf-brand);
    }
  }

  ul, ol { padding-left: var(--sf-5); }
  li::marker { color: var(--sf-brand); }
  
  blockquote {
    border-left: 4px solid var(--sf-brand);
    padding-left: var(--sf-5);
    font-style: italic;
    color: var(--sf-fg-2);
    p { margin-bottom: 0; }
  }

  pre {
    background-color: var(--sf-bg-1);
    border: 1px solid var(--sf-line-2);
    border-radius: var(--sf-radius-md);
    padding: var(--sf-4);
    overflow-x: auto;
    font-size: var(--sf-text-sm);
  }
  code {
    font-family: var(--sf-font-mono);
    background-color: var(--sf-bg-1);
    padding: .1em .3em;
    border-radius: var(--sf-radius-sm);
  }
  pre code { padding: 0; background: none; }
}

/* --- Post Tags --- */
.post-tags {
  @include cluster(var(--sf-3), center);
  margin-top: var(--sf-8);
  span { color: var(--sf-muted); }
  .post-tag {
    display: inline-block;
    background-color: var(--sf-bg-1);
    font-size: var(--sf-text-sm);
    padding: var(--sf-1) var(--sf-3);
    border-radius: var(--sf-radius-pill);
    text-decoration: none;
    transition: background-color .2s ease;
    &:hover { background-color: var(--sf-line-2); }
  }
}

/* --- Right Sidebar --- */
.post-sidebar-right {
  display: none; // Hidden on mobile
  @include breakpoint(md) {
    display: flex;
    flex-direction: column;
    gap: var(--sf-6);
    position: sticky;
    top: calc(var(--sf-nav-height) + var(--sf-6));
    align-self: start; // Important for sticky positioning
  }
}

/* --- Table of Contents --- */
.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;
  a {
    display: block;
    padding: var(--sf-2) var(--sf-4);
    text-decoration: none;
    border-left: 2px solid var(--sf-line-2);
    color: var(--sf-fg-2);
    font-size: var(--sf-text-sm);
    transition: all .2s ease;
    &:hover {
      background-color: var(--sf-bg-1);
      color: var(--sf-brand);
      border-left-color: var(--sf-brand);
    }
  }
}

/* --- Floating & Sticky Share Bars --- */
.post-share-floating {
  display: none; // Hidden by default
  @include breakpoint(lg) {
    display: flex;
    flex-direction: column;
    gap: var(--sf-2);
    position: absolute;
    left: -80px; // Positioned outside the content area
    top: 0;
    
    // "Sticks" relative to the content area
    position: sticky;
    top: calc(var(--sf-nav-height) + var(--sf-8)); 
    
    &__title {
      font-size: var(--sf-text-xs);
      color: var(--sf-muted);
      writing-mode: vertical-rl;
      text-orientation: mixed;
      margin-bottom: var(--sf-2);
      transform: rotate(180deg);
    }
    a {
      font-size: 1.25rem;
      padding: var(--sf-2);
      border-radius: 50%;
      color: var(--sf-fg-2);
      &:hover { background-color: var(--sf-bg-1); color: var(--sf-brand); }
    }
  }
}

.post-share-mobile-sticky {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: var(--sf-z-sticky);
  background: var(--sf-bg-2);
  border-top: 1px solid var(--sf-line-2);
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);

  @include breakpoint(md) { display: none; } // Hide on desktop

  &__buttons {
    @include cluster(0, center, center);
    padding: var(--sf-2);
    span { font-size: var(--sf-text-sm); color: var(--sf-muted); margin-right: var(--sf-3); }
    a {
      flex-grow: 1;
      text-align: center;
      padding: var(--sf-2);
      font-size: 1.5rem;
      color: var(--sf-fg-2);
    }
  }
}


/* --- Post Footer Sections --- */
.post-footer-container {
  max-width: var(--sf-measure);
  margin-inline: auto;
  padding-inline: var(--sf-container-padding);
}
.post-author-bio {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--sf-5);
  align-items: center;
  background-color: var(--sf-bg-1);
  padding: var(--sf-6);
  border-radius: var(--sf-radius-lg);
  margin-block: var(--sf-10);
  &__avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
  }
  h4 { margin: 0 0 var(--sf-2) 0; font-size: var(--sf-text-lg); }
  p { margin: 0; color: var(--sf-fg-2); }
}
.post-comments-section {
  margin-top: var(--sf-10);
}


/* --- AD PLACEHOLDER STYLES --- */
.ad-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--sf-bg-1);
  border: 1px dashed var(--sf-line-1);
  border-radius: var(--sf-radius-md);
  color: var(--sf-muted);
  font-size: var(--sf-text-sm);
  text-align: center;
  width: 100%;
  
  &--skyscraper { height: 600px; }
  &--in-content { min-height: 100px; margin-block: var(--sf-6); }
  &--sidebar { height: 250px; }
  &--horizontal { height: 90px; margin-block: var(--sf-8); }
  &--mobile-banner { min-height: 50px; border: none; border-bottom: 1px solid var(--sf-line-2); border-radius: 0;}
}