/* ============================================================================
   PAGES / PAGE (Definitive, Complete & Responsive Version)
   ============================================================================ */

// --- SLDS-Style Page Header ---
// This is the full-width banner that introduces the page content.
.sf-page-header {
  padding: var(--sf-6) 0;
  border-bottom: 1px solid var(--sf-line-2);
  background: var(--sf-bg-2);
  
  // This is a "belt-and-suspenders" fix. The main fix should be on .sf-page
  // in _structure.scss, but this ensures this component never causes an issue.
  overflow-x: hidden;

  &__title {
    margin-bottom: var(--sf-2);
  }

  &__subtitle {
    color: var(--sf-muted);
    max-width: 65ch; // Constrain for readability
  }
}

// --- Main Page Content Layout ---
// This is the container for the primary content and the optional sidebar.
.page-layout {
  display: grid;
  gap: var(--sf-6);

  // On desktop, create the two-column layout
  @media (min-width: 960px) {
    grid-template-columns: 1fr 280px; // Main Content | Sidebar
  }

  // Modifier for when no sidebar is present.
  &--no-aside {
    display: block; // Revert to a standard block layout
    
    .page-content-wrapper {
      max-width: 800px; // A comfortable centered width for reading.
      margin-inline: auto;
    }
  }
}

// --- Main Content Card ---
.page-content-card {
  background: var(--sf-bg-2);
  border: 1px solid var(--sf-line-2);
  border-radius: var(--sf-radius-lg);
  box-shadow: none; // Content cards are flat, not floating

  &:hover { // Disable all hover effects
    transform: none;
    box-shadow: none;
  }
  .sf-card__body {
    padding: var(--sf-5) var(--sf-6);
  }
}

// --- Optional Sidebar ---
.page-aside {
  @media (min-width: 960px) {
    position: sticky;
    top: calc(68px + var(--sf-6)); // Header height + desired offset
    align-self: start;
  }

  // On mobile, the sidebar stacks below the main content
  @media (max-width: 959px) {
    margin-top: var(--sf-6);
    padding-top: var(--sf-6);
    border-top: 1px solid var(--sf-line-2);
  }
}

// --- Table of Contents Styling (NEW) ---
.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;

  // Top-level list item
  li {
    margin-bottom: var(--sf-1);
  }

  a {
    display: block;
    padding: var(--sf-2) var(--sf-3);
    border-radius: var(--sf-radius-md);
    font-weight: 600;
    color: var(--sf-fg-2);
    text-decoration: none;
    transition: background-color .15s ease, color .15s ease;

    &:hover {
      background-color: color-mix(in oklab, var(--sf-bg-1), white 60%);
      color: var(--sf-fg);
    }
  }

  // Nested list for sub-headings
  ul {
    list-style: none;
    padding-left: var(--sf-4);
    margin-top: var(--sf-2);
  }
}